<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Image Tool - Image manipulation using Canvas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="data:text/css;base64,Ym9keSxodG1se2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9LnJlc2J0bntiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyLXJhZGl1czo1cHg7cGFkZGluZzo0cHg7Ym9yZGVyOjFweCBzb2xpZCAjNjIwMGVlO291dGxpbmU6MDtjb2xvcjojNjIwMGVlO21pbi13aWR0aDo4MHB4O21hcmdpbjoxMHB4O2N1cnNvcjpwb2ludGVyfWJvZHl7bWFyZ2luOmF1dG87dGV4dC1hbGlnbjpjZW50ZXI7ZGlzcGxheTpibG9jaztqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO30ucmVzYnRuOmFjdGl2ZSwucmVzYnRuOmhvdmVye2JveC1zaGFkb3c6MnB4IDJweCAjZDlkY2UwO2JhY2tncm91bmQtY29sb3I6IzYyMDBlZTtjb2xvcjojZmZmfQ==">
</head>

<body>
    <script src="data:text/javascript;base64,YXN5bmMgZnVuY3Rpb24gY3JvcCgpIHsKY29uc3QgaGFzV2ViUFN1cHBvcnQgPSBhd2FpdCAoKCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIF8pID0+IHsKLy9TaW1wbGVzdCB3YXkgdG8gY2hlY2sgZm9yIHdlYnAgSW1hZ2VzIHN1cHBvcnQgaW5zdGVhZCBvZiB1c2VyIGFnZW50IHNuaWZmaW5nIGFuZCBzdHVmZgpjb25zdCBpbWcgPSBuZXcgSW1hZ2U7CmltZy5vbmxvYWQgPSAoKSA9PiB7CnJlc29sdmUoaW1nLm5hdHVyYWxIZWlnaHQgIT09IDAgJiYgaW1nLm5hdHVyYWxXaWR0aCAhPT0gMCkKfTsKaW1nLm9uZXJyb3IgPSAoKSA9PiB7CnJlc29sdmUoZmFsc2UpCn07CmltZy5zcmMgPQoiZGF0YTppbWFnZS93ZWJwO2Jhc2U2NCxVa2xHUmo0QUFBQlhSVUpRVmxBNElESUFBQURRQWdDZEFTb1RBQlFBUG0weWxVZWtJcUloS0FnQWdBMkpad0FBUGFPZ0FQNzUwc3ZPeDdnLy9yWG43a1hBQUFBQUFBPT0iOwp9KSkoKTsKY29uc3Qgbm9vcCA9ICgpID0+IHt9Owpjb25zdCBkaXYgPSAoKCkgPT4gewpjb25zdCBfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoXyk7CnJldHVybiBfCn0pKCk7CmNvbnN0IGNhbnZhcyA9ICgoKSA9PiB7CmNvbnN0IF9pdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CmEuaGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgLSAyMDsKYS53aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggLSAyMDsKX2l2LmFwcGVuZENoaWxkKGEpOwpkaXYuYXBwZW5kQ2hpbGQoX2l2KTsKYS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwpyZXR1cm4gYQp9KSgpOwoKY29uc3QgZW1wdHkgPSAoZWwpID0+IHsKbGV0IHI7CnIgPSBlbC5sYXN0Q2hpbGQ7CndoaWxlIChyKSB7CmVsLnJlbW92ZUNoaWxkKHIpOwpyID0gZWwubGFzdENoaWxkCn07CnJldHVybiB0cnVlOwp9OwoKZnVuY3Rpb24gRHJhd0ltYWdlTWF5YmUoZikgewooKCkgPT4gewpjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmEudGV4dENvbnRlbnQgPQoiY2xpY2sgdG8gc3RhcnQuLnBsYWNlIHRoZSBtb3VzZSB3aGVyZSB5b3Ugd2FudCB0byBzdGFydC4uY2xpY2sgb24gdGhlIGRlc2lyZWQgcGxhY2UgdG8gZW5kIjsKZGl2LmFwcGVuZENoaWxkKGEpOwpyZXR1cm4gYTsKfSkoKTsKbGV0IGZpcnN0WCwgZmlyc3RZOwpsZXQgZmluYWxYLCBmaW5hbFk7CmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwpjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy5oZWlnaHQsIGNhbnZhcy53aWR0aCk7CmNvbnN0IGNyb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKY3JvcC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CmNyb3Auc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCAjMDAwJzsKY3JvcC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNyb3ApOwpjcm9wLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CmRpdi5hcHBlbmRDaGlsZCgoKCkgPT4gewpjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmEudGV4dENvbnRlbnQgPSAiQ2xpY2sgSGVyZSB0byBjbGVhciBzZWxlY3Rpb24iCmEub25jbGljayA9ICgpID0+IHsKZmlyc3RYID0gZmlyc3RZID0gZmluYWxYID0gZmluYWxZID0gdW5kZWZpbmVkOwpjcm9wLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7Cn0KYS5jbGFzc05hbWUgPSAncmVzYnRuJzsKcmV0dXJuIGEKfSkoKSk7CgpmdW5jdGlvbiBBYnNNb3VzZVBvc2l0aW9uKGNhbnZhcywgZXZ0KSB7CmNvbnN0IC8vIGFicy4gc2l6ZSBvZiBlbGVtZW50CnJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCi8vIHJlbGF0aW9uc2hpcCBiaXRtYXAgdnMuIGVsZW1lbnQgZm9yIFgKc2NhbGVYID0gY2FudmFzLndpZHRoIC8gcmVjdC53aWR0aCwKc2NhbGVZID0gY2FudmFzLmhlaWdodCAvIHJlY3QuaGVpZ2h0OyAvLyByZWxhdGlvbnNoaXAgYml0bWFwIHZzLiBlbGVtZW50IGZvciBZCgpyZXR1cm4gewp4OiAoZXZ0LmNsaWVudFggLSByZWN0LmxlZnQpICogc2NhbGVYLCAvLyBzY2FsZSBtb3VzZSBjb29yZGluYXRlcyBhZnRlciB0aGV5IGhhdmUKeTogKGV2dC5jbGllbnRZIC0gcmVjdC50b3ApICogc2NhbGVZIC8vIGJlZW4gYWRqdXN0ZWQgdG8gYmUgcmVsYXRpdmUgdG8gZWxlbWVudAp9Cn0KCmZ1bmN0aW9uIFJlbE1vdXNlUG9zaXRpb24oY2FudmFzLCBldnQpIHsKY29uc3QgcmVjdCA9IGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKcmV0dXJuIHsKeDogKGV2dC5jbGllbnRYIC0gcmVjdC5sZWZ0KSwKeTogKGV2dC5jbGllbnRZIC0gcmVjdC50b3ApCn0KfQoKZnVuY3Rpb24gX19jcm9wKGN0eCwgYXgsIGF5LCB3LCBoKSB7CmNvbnN0IGltZ2RhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKGF4LCBheSwgdywgaCk7CmNvbnN0IGN2ZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpOwpjb25zdCBjZnggPSBjdmYuZ2V0Q29udGV4dCgiMmQiKTsKY3ZmLmhlaWdodCA9IGg7CmN2Zi53aWR0aCA9IHc7CmNmeC5wdXRJbWFnZURhdGEoaW1nZGF0YSwgMCwgMCk7CmxldCB0eXBlOwpjb25zdCBoYXNoZXMgPSAod2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyKDEpKTsKaWYgKGhhc2hlcyAmJiBoYXNoZXMuc3BsaXQoIi8iKVswXS50b0xvd2VyQ2FzZSgpID09PSAiaW1hZ2UiKSB7Cgp0eXBlID0gaGFzaGVzCn0gZWxzZSB7CnR5cGUgPSAiaW1hZ2UvcG5nIgp9Cgpjb25zb2xlLmxvZyhgVXNpbmcgSW1hZ2UgVHlwZToke3R5cGV9YCkKY29uc3QgaW0gPSBjdmYudG9EYXRhVVJMKHR5cGUpOwpjb25zdCBpbWcgPSBuZXcgSW1hZ2U7CmltZy5zcmMgPSBpbTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpbWcpOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCgoKSA9PiB7CmNvbnN0IGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKZC50ZXh0Q29udGVudCA9ICJDbGljayBpbWFnZSB0byBkb3dubG9hZCI7CnJldHVybiBkOwp9KSgpKTsKaW1nLm9uY2xpY2sgPSAoKSA9PiB7CmNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CmEuZG93bmxvYWQgPSAiSW1hZ2UucG5nIjsKYS5ocmVmID0gaW1nLnNyYzsKYS5jbGljaygpOwp9CmNvbnNvbGUubG9nKCJET05FIikKfQpjb25zdCBjcm9wc2J0biA9ICgoKSA9PiB7CmNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKYS50ZXh0Q29udGVudCA9ICJDcm9wIjsKYS5jbGFzc05hbWUgPSAicmVzYnRuIjsKcmV0dXJuIGE7Cn0pKCk7CmRpdi5hcHBlbmRDaGlsZChjcm9wc2J0bik7CmNyb3BzYnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CmNvbnN0IHJvb3RzID0gZSA9PiB7CmNvbnNvbGUubG9nKCJzdGFydCIpOwpjb25zdCBfX3Bvc19fID0gQWJzTW91c2VQb3NpdGlvbihjYW52YXMsIGUpOwpjb25zdCByZWxfcG9zID0gUmVsTW91c2VQb3NpdGlvbihjYW52YXMsIGUpOwppZiAoIWZpcnN0WCAmJiAhZmlyc3RZKSB7CmZpcnN0WCA9IF9fcG9zX18ueDsKX3JlbEZYID0gcmVsX3Bvcy54CmZpcnN0WSA9IF9fcG9zX18ueTsKX3JlbEZZID0gcmVsX3Bvcy55Owp9IGVsc2UgewpmaW5hbFggPSBfX3Bvc19fLng7Cl9yZWxGTlggPSByZWxfcG9zLng7CmZpbmFsWSA9IF9fcG9zX18ueTsKX3JlbEZOWSA9IHJlbF9wb3MueTsKfQppZiAoZmluYWxZICYmIGZpbmFsWCkgewpjcm9wLnN0eWxlLmRpc3BsYXkgPSAnJzsKY29uc3QgZGl2X2hlaWdodCA9IE1hdGguYWJzKF9yZWxGTlkgLSBfcmVsRlkpOwpjb25zdCBkaXZfd2lkdGggPSBNYXRoLmFicyhfcmVsRlggLSBfcmVsRk5YKTsKY29uc3QgdGNvcmQgPSBNYXRoLm1pbihmaXJzdFksIGZpbmFsWSk7CmNvbnN0IGxjb3JkID0gTWF0aC5taW4oZmlyc3RYLCBmaW5hbFgpOwpjb25zdCBkaXZZY29yZCA9IE1hdGgubWluKF9yZWxGTlksIF9yZWxGWSk7CmNvbnN0IGRpdlhjb3JkID0gTWF0aC5taW4oX3JlbEZOWCwgX3JlbEZYKTsKY3JvcHNidG4ub25jbGljayA9ICgpID0+IHsKY29uc29sZS5sb2cobGNvcmQsIHRjb3JkLCBkaXZfaGVpZ2h0LCBkaXZfd2lkdGgpCl9fY3JvcChjdHgsIGxjb3JkLCB0Y29yZCwgZGl2X3dpZHRoLCBkaXZfaGVpZ2h0KTsKfTsKY3JvcC5zdHlsZS50b3AgPSBgJHtkaXZZY29yZH1weGA7CmNyb3Auc3R5bGUubGVmdCA9IGAke2Rpdlhjb3JkfXB4YDsKY3JvcC5zdHlsZS53aWR0aCA9IGAke2Rpdl93aWR0aH1weGA7CmNyb3Auc3R5bGUuaGVpZ2h0ID0gYCR7ZGl2X2hlaWdodH1weGA7CmNyb3BzYnRuLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwp9Cgp9CmNhbnZhcy5vbmNsaWNrID0gZSA9PiB7CnJvb3RzKGUpCn07CmNvbnNvbGUubG9nKCJEcmF3aW5nIGltYWdlIikKY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXI7CnJlYWRlci5vbmxvYWQgPSAoKSA9PiB7CmNhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJyc7CmNvbnNvbGUubG9nKCJMb2FkZWQgRmlsZSIpCmNvbnN0IGltZyA9IG5ldyBJbWFnZTsKaW1nLm9ubG9hZCA9ICgpID0+IHsKY29uc29sZS5sb2coIkNhbnZhczoiKTsKLyogY2FudmFzLnN0eWxlLmhlaWdodCA9IGAke2NhbnZhcy5oZWlnaHR9cHhgOwpjYW52YXMuc3R5bGUud2lkdGggPSBgJHtjYW52YXMud2lkdGh9cHhgOyovCmNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7CmN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpCn0KaW1nLnNyYyA9IHJlYWRlci5yZXN1bHQ7Cn07CnJlYWRlci5yZWFkQXNEYXRhVVJMKGYpOwp9Owpjb25zdCBpbnAgPSAoKCkgPT4gewpjb25zdCBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKby50eXBlID0gImZpbGUiOwpvLmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsIGUgPT4gewpjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CkRyYXdJbWFnZU1heWJlKGZpbGUpOwp9KQpyZXR1cm4gbwp9KSgpOwooKCkgPT4gewpjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7CmEuY2xhc3NOYW1lID0gInJlc2J0biI7CmRpdi5hcHBlbmRDaGlsZChhKTsKYS50ZXh0Q29udGVudCA9ICJDbGljayBUbyBTZWxlY3QgSW1hZ2UiOwphLm9uY2xpY2sgPSAoKSA9PiB7CmEudGV4dENvbnRlbnQgPSAnQ2xpY2sgVG8gRWRpdCBBbm90aGVyIEltYWdlJzsKaW5wLmNsaWNrKCk7CmEub25jbGljayA9ICgpID0+IHsKZW1wdHkoZG9jdW1lbnQuYm9keSk7CmNyb3AoKTsKfQp9CnJldHVybiBhCn0pKCk7Cn07CmNyb3AoKQ==">
    </script>

</body>

</html>